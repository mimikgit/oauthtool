{"version":3,"sources":["webpack:///webpack/bootstrap 9a5532e41698e0baeff5","webpack:///external \"electron\"","webpack:///./src/renderer/index.js","webpack:///external \"ws\"","webpack:///external \"simple-jsonrpc-js\""],"names":["app","document","querySelector","showMessage","msg","style","display","innerText","init","onclick","clientId","redirectUri","edgeIdToken","console","log","value","url","window","location","assign","EDGE_SDK_PORT","ipAddress","localEDGEWSURL","ws","jrpc","toStream","_msg","send","on","call","then","result","id_token","disabled","setImmediate","onmessage","undefined","close","catch","e","msgData","messageHandler","err","ipcRenderer","event","arg","status","data","message","error","error_description","devClientId","devRidirectUri","token","JSON","stringify","accessToken"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9a5532e41698e0baeff5","module.exports = require(\"electron\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"electron\"\n// module id = 0\n// module chunks = 0 1","import { ipcRenderer, } from 'electron';\nimport WebSocket from 'ws';\nimport JsonRPC from 'simple-jsonrpc-js';\n\nconst app = document.querySelector('#app');\n\n\nfunction showMessage(msg) {\n    document.querySelector('.message').style.display = 'flex';\n    document.querySelector('.message').innerText = msg;\n}\n\nfunction init() {\n    app.style.display = 'block';\n}\n\ninit();\n\ndocument.querySelector('#btnRedirect').onclick = () => {\n    const clientId = document.querySelector('#clientId');\n    const redirectUri = document.querySelector('#redirectUri');\n    const edgeIdToken = document.querySelector('#edgeIdToken');\n    console.log({\n      clientId: clientId.value,\n      redirectUri: redirectUri.value,\n      edgeIdToken: edgeIdToken.value\n    });\n\n    const url = \"openid://callback?protocol=true&client_id=\" + clientId.value + \"&redirect_uri=\" + redirectUri.value + \"&edge_id_token=\" + edgeIdToken.value;\n    window.location.assign(url);\n};\n\ndocument.querySelector('#btnEdgeToken').onclick = () => {\n    const clientId = document.querySelector('#clientId');\n    const redirectUri = document.querySelector('#redirectUri');\n    const edgeIdToken = document.querySelector('#edgeIdToken');\n    console.log({\n      clientId: clientId.value,\n      redirectUri: redirectUri.value,\n      edgeIdToken: edgeIdToken.value\n    });\n\n    const url = \"openid://callback?client_id=\" + clientId.value + \"&redirect_uri=\" + redirectUri.value + \"&edge_id_token=\" + edgeIdToken.value;\n    window.location.assign(url);\n};\n\ndocument.querySelector('#btnDeviceConnect').onclick = () => {\n\n    showMessage('');\n    const EDGE_SDK_PORT = 8083; // Currently the edge SDK default port is 8083\n    const ipAddress = document.querySelector('#ipAddress');\n    const localEDGEWSURL = `ws://${ipAddress.value}:${EDGE_SDK_PORT}/ws/edge-service-api/v1`; // \"ws://127.0.0.1:8083/ws/edge-service-api/v1\"\n\n    const ws = new WebSocket(localEDGEWSURL);\n    const jrpc = new JsonRPC();\n    ws.jrpc = jrpc;\n    ws.jrpc.toStream = (_msg) => {\n      ws.send(_msg);\n    };\n  \n    ws.on('open', () => {\n      // console.log('getEdgeIdToken socket open');\n      jrpc.call('getEdgeIdToken', null).then((result) => {\n        document.querySelector('#edgeIdToken').value = result.id_token;\n        document.querySelector('#btnResetEdgeToken').disabled = false;\n        document.querySelector('#btnRedirect').disabled = false;\n        setImmediate(() => {\n          ws.onmessage = undefined;\n          ws.close();\n        });\n      }).catch((e) => {\n        console.log('catch error:', e);\n        setImmediate(() => {\n          ws.onmessage = undefined;\n          ws.close();\n        });\n\n        showMessage('Error connecting: ' + e);\n      });\n    });\n  \n    ws.on('message', (msgData) => {\n      // const msg = JSON.parse(msgData);\n      // console.log('getMe socket message: ', msg);\n      jrpc.messageHandler(msgData);\n    });\n  \n    ws.on('error', (err) => {\n      console.log('edge ws error:', err);\n\n      showMessage('Edge error: ' + err);\n    //   cb(wsError(err));\n    });\n  \n    ws.on('close', () => {\n      // console.log('edge ws close');\n    });\n  };\n\ndocument.querySelector('#btnResetEdgeToken').onclick = () => {\n    const clientId = document.querySelector('#clientId');\n    const redirectUri = document.querySelector('#redirectUri');\n    const edgeIdToken = document.querySelector('#edgeIdToken');\n\n    const url = \"openid://callback?reset=true&client_id=\" + clientId.value + \"&redirect_uri=\" + redirectUri.value + \"&edge_id_token=\" + edgeIdToken.value;\n    window.location.assign(url);\n};\n  \nipcRenderer.on('protocol-reply', (event, arg) => {\n    console.log('protocol-reply', arg);\n    showMessage('');\n    if (arg.status === true) {\n      if (arg.data) {\n        document.querySelector('#btnRedirect').disabled = true;\n        document.querySelector('#btnEdgeToken').disabled = false;\n      }\n    } else {\n        const msg = `${arg.message.error} - ${arg.message.error_description}`;\n        showMessage(msg);\n    }\n});\n  \nipcRenderer.on('oauth-login-reply', (event, arg) => {\n    console.log('oauth-login-reply', arg);\n    document.querySelector('#btnRedirect').disabled = true;\n    document.querySelector('#btnEdgeToken').disabled = false;\n    showMessage('');\n    if (arg.devClientId) {\n        document.querySelector('#clientId').value = arg.devClientId;\n    }\n    if (arg.devRidirectUri) {\n        document.querySelector('#redirectUri').value = arg.devRidirectUri;\n    }\n    if (arg.status === true) {\n      if (arg.token) {\n        console.log(`Token: ${JSON.stringify(arg.token)}`);\n        const accessToken = document.querySelector('#accessToken');\n        accessToken.innerText = JSON.stringify(arg.token);\n      }\n    } else {\n        const msg = `${arg.message.error} - ${arg.message.error_description}`;   \n        showMessage(msg);\n    }\n});\n\n\n// WEBPACK FOOTER //\n// ./src/renderer/index.js","module.exports = require(\"ws\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ws\"\n// module id = 9\n// module chunks = 1","module.exports = require(\"simple-jsonrpc-js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"simple-jsonrpc-js\"\n// module id = 10\n// module chunks = 1"],"sourceRoot":""}